---
title: "Séries Temporais em R"
author: "Camily Nunes dos Santos"
---

Atividades realizadas tiradas do Material Séries Temporais em R de Ricardo Lima†. [<https://analisemacro.com.br/wp-content/uploads/2015/02/CursoCompleto.pdf>]

#Objetivo Final: é fazer inferências sobre e tentar descrever o futuro desenvolvimento da variável de interesse.

#Exercício 1

vamos começar com um banco de dados disponível no próprio R no pacote pwt8.

```{r}
install.packages("pwt8")
```

```{r}
library(pwt8) #Carregando os dados do pacote
```

```{r}
data("pwt8.0") # Carregando os dados do pacote
```

# Variáveis escolhidas são:

# Pib real

# Média de horas trabalhadas

# Taxa de c\^ambio

```{r}
br <-subset (pwt8.0, country =="Brazil",
             select = c (rgdpna, avh, xr))
```

```{r}
br$prod <- br$rgdpna/br$avh
```

```{r}
write.table(br, file='dados.txt')
```

```{r}
dados <- read.table ('dados.txt')
```
  
```{r}  
#Neste comando, está sendo criada uma **série temporal** no R, com os seguintes parâmetros:

#`pib_dados` é o objeto que armazenará a série temporal.
# `ts()` é a função que converte o vetor ou conjunto de dados (`pib`) em uma série temporal.
# `start = 2022` define o **ano de início** da série como 2022.
# `freq = 1` define a **frequência** dos dados, indicando que as observações são anuais. A frequência "1" significa que há uma observação por ano.

### Explicação do Código:
#Esse comando, portanto, está criando uma série temporal anual que começa em 2022, onde os dados de `pib` são organizados ao longo do tempo com uma frequência de uma observação por ano.  

pib_dados <- ts(pib, start = 2022, freq = 1)
```
    
  
```{r}
dados <- ts(dados, start = 1950, freq = 1)
```

Aqui o comando ts está avisando ao R que a matriz dados possui séries temporais que se iniciam em 1950 com frequência 1, ou seja, são dados anuais. Frequência 4 e 12 seriam, respectivamente, dados trimestrais e mensais.

or

```{r}
#Show in New Window (Erro: ',' inesperado em "dados <- ts(read.table('dados.txt'), start = 1950),")
dados <- ts(read.table('dados.txt'), start = 1950), freq = 1)
```
  
plot(pib_dados)   
    
```{r}
plot (dados)
```

#aprimorando gráfico

```{r}
plot (dados, 
      col = 'blue',
      main = 'Dados Brasileiros',
      xlab = 'Ano')
```

# Exercício 2

Usaremos o PIB trimestral (série 1232 do SGS do Banco Central do Brasil)  
  
Testei com: PIB Total - variação % sobre o mesmo período do ano anterior - Média - Período de 23/09/2024 a 23/10/2024 - Base: Expectativas informadas nos últimos 30 dias


```{r}  
#código sugerido pelo material
pib <- ts(read.delim("pib.csv", dec = ","), 
           start = 1991, freq = 4)  
#continua...
```

  
```{r} 
#banco_treino
pib <- read.csv("C:/Users/camir/OneDrive - Universidade Federal de Rondonópolis/Eco_Series_Temporais/Dados/Banco Central/pib.csv", sep = ",", header = TRUE, skip = 1)
```
  
```{r}
pib <- read.csv("https://github.com/CamilyNunes/Eco_Series_Temporais/raw/refs/heads/main/Dados/Ipea_Data/ipeadata%5B30-10-2024-03-45%5D.csv", sep = ";", header = TRUE, skip = 1)
```
  
  
```{r}
#continuação
pib <- pib [, -1]
```

```{r}
plot(pib, main = 'PIB brasileiro', 
     ylab = 'Indice', xlab = 'Ano', 
     bty = '1', col = 'red', lty = 1)
```

```{r}
grid (col = 'darkgrey',
      lwd = 2)
```
  
 Agoradevemosrodararegressão,paraissodevemoscriarosdummies sazonais.  
   
```{r}
 Q <- ordered(cycle(pib))
```
     
     
```{r}
  
 
 pib.reg <-lm(pib~Q)
```

 Utilizandoocomandosummarypodemosobterumresumodaregressão.
```{r}
summary(pib.reg)
```
  
    
 3.1.2 Tendência de longo prazo  
   
   Assumindo agora que nós temos dados anuais podemos rodar a seguinte regressão:  
   
                               PIBt = + Anot+ t  
                                 
Resolução:    

1. caso da sazonalidade;
2. Se for estatisticamente != de zero podemos concluir que a série em questão não possui uma tendência linear. 
3.  Se o valor de t for estatisticamente signicativo (+10%) a série t representará PIBt removido de sua tendência linear. 
  
  Antes iremos importar os dados, avisar ao R que se trata de séries de tempo;
  Note que para issobprecisamos criar um vetor representando atendência linear (por exemplo uma sequência de 1962 até 2013,ou simples mentede 1 até 52).  
    
1. Como sempre começamos importando os dados e, em seguida, visualizando eles
```{r}
pib <- ts(read.delim("https://github.com/CamilyNunes/Eco_Series_Temporais/raw/refs/heads/main/Dados/Ipea_Data/bcdata.sgs.1207.csv", dec=";"),
          start=1991, freq=4)
```
  
```{r}  
#não entendi
pib <- pib[,-1]
```
   
```{r}
plot(pib,main='PIBbrasileiro',
     ylab='Indice',xlab = 'Ano',
     bty='l',col='red',lty=1)
```
  
```{r}
grid(col='darkgrey',
     lwd=2)
```
```{r}
#teste para resolver provlema:  
# Primeiro, crie o gráfico
plot(pib_dados, main = "PIB ao longo do tempo", col = "blue")

# Depois, adicione a grade
grid(col = "darkgrey", lwd = 2)
```
      
      
2.  Agoradevemosrodararegressão,paraissodevemoscriarosdummies sazonais.  
  
```{r}
Q <- ordered(cycle(pib))

pib.reg <-lm(pib~Q)
```
  
3.  Utilizandoocomandosummarypodemosobterumresumodaregressão.  
  
```{r}
 summary(pib.reg)
```
 4. será então necessário remover a parte quadrática da tendência   
   
   
    